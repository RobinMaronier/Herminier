{"version":3,"sources":["../../node_modules/@angular/core/@angular lazy","../../src lazy","../../src/pages/home/home.ts","../../src/Provider/Requestvelib.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 107;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/@angular lazy\n// module id = 107\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 149;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 149\n// module chunks = 0","import {Component} from '@angular/core';\nimport {NavController} from 'ionic-angular';\nimport * as Leaflet from 'leaflet';\nimport {Requestvelib} from \"../../Provider/Requestvelib\";\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n  map: Leaflet.Map;\n  center: L.PointTuple;\n  datalist: any;\n\n\n  truc: number = 1000;\n\n  constructor(public navCtrl: NavController, public request: Requestvelib) {\n  }\n\n  ngOnInit() {\n        this.drawMap();\n      }\n\n  private velibRequest(latlng, that): void {\n    that.request.getVelib(latlng).subscribe(\n      response => {\n        that.datalist = response.records;\n        //console.log('voici la data = ', response);\n        that.setMarkers(response.records, that);\n        console.log('datalist', that.datalist);\n      },\n      error => {\n        console.log('bonjour l\\'erreur', error.content.body);\n      }\n    )\n  }\n\n  private setMarkers(data, that): void {\n    let icon = Leaflet.icon({\n      iconUrl: 'assets/imgs/bike.png',\n      iconSize: [25, 25]\n    });\n    for (let i of data) {\n      let tab = {lat: i.geometry.coordinates[1], lng: i.geometry.coordinates[0]};\n      Leaflet.marker(tab, {icon: icon}).addTo(that.map).bindPopup(i.fields.name);\n    }\n  }\n\n  private removeAllLayers(that): void {\n    that.map.eachLayer(function (layer) {\n      if (layer instanceof Leaflet.marker) {\n        layer.remove();\n      }\n    });\n  }\n\n  private drawMap(): void {\n    this.map = Leaflet.map('map');\n    Leaflet.tileLayer('https://api.mapbox.com/styles/v1/mapbox/streets-v10/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGF0cmlja3IiLCJhIjoiY2l2aW9lcXlvMDFqdTJvbGI2eXUwc2VjYSJ9.trTzsdDXD2lMJpTfCVsVuA', {\n      maxZoom: 18\n    }).addTo(this.map);\n    let circle: Leaflet.Circle = Leaflet.circle([0, 0], {radius: 1000}).addTo(this.map);\n    let marker: Leaflet.Marker = Leaflet.marker([0, 0]).addTo(this.map);\n    //web location\n    this.map.locate({setView: true, watch: false});\n    this.map.locate({setView: false, watch: true});\n\n    let thisMap = this.map;\n    let velibRequest = this.velibRequest;\n    let that = this;\n\n    function onLocationFound(e) {\n      that.removeAllLayers(that);\n      marker.remove();\n      marker.setLatLng(e.latlng).addTo(thisMap).bindPopup('Ma position');\n      circle.remove();\n      circle.setLatLng(e.latlng).addTo(thisMap);\n      velibRequest(e.latlng, that);\n    }\n    this.map.on('locationfound', onLocationFound);\n\n    function onLocationError(e) {\n      alert('Impossible de récupérer votre position. Veuillez autoriser cette permission dans les paramètres de votre application.');\n    }\n    this.map.on('locationerror', onLocationError);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts","import {Observable} from \"rxjs/Observable\";\nimport {ToastController} from \"ionic-angular\";\nimport {Http} from \"@angular/http\";\nimport {Injectable} from \"@angular/core\";\nimport 'rxjs/add/operator/map';\n\n@Injectable()\nexport class Requestvelib {\n\n  private baseUrl = 'https://opendata.paris.fr/api/records/1.0/search/';\n  private dataset = 'dataset=stations-velib-disponibilites-en-temps-reel';\n\n  constructor(public http: Http) {\n  }\n\n  private makeDataURL(coordX: number, coordY: number): string {\n    let uri = this.baseUrl + '?' + this.dataset;\n    uri += '&' + this.getLangRequest();\n    uri += '&' + this.getNumberRowRequest();\n    uri += '&' + this.getOnlyOpen(true);\n    uri += '&' + this.filterWithPosition(coordX, coordY, 1000)\n    return uri;\n  }\n\n  private filterWithPosition(coordX: number, coordY: number, distance: number): string {\n    let geoFilter = 'geofilter.distance=' + String(coordX) + ',' + String(coordY) + ',' + String(distance);\n    return geoFilter;\n  }\n\n  private getLangRequest(): string {\n    let lang = 'lang=fr';\n    return lang;\n  }\n\n  private getNumberRowRequest(): string {\n    let numberOfRow = 'rows=90';\n    return numberOfRow;\n  }\n\n  private getOnlyOpen(open: boolean): string {\n    let onlyOpen = 'facet=status';\n    if (open) {\n      onlyOpen += '&refine.status=OPEN';\n    } else {\n      onlyOpen += '&refine.status=CLOSE';\n    }\n    return onlyOpen;\n  }\n\n  public getVelib(latlng): Observable<any> {\n    let url: string = this.makeDataURL(latlng.lat, latlng.lng);\n    console.log('voici l\\'url = ', url);\n    /*  var headers = new Headers();\n      headers.append(\"Authorization\", \"Bearer \" + token);\n      headers.append('AppKey', this.AppKey);*/\n    return this.http.get(url).map(res => res.json());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Provider/Requestvelib.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { ErrorHandler, NgModule } from '@angular/core';\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { StatusBar } from '@ionic-native/status-bar';\n\nimport { MyApp } from './app.component';\nimport { HomePage } from '../pages/home/home';\nimport {Requestvelib} from \"../Provider/Requestvelib\";\nimport {HttpModule} from \"@angular/http\";\n\n@NgModule({\n  declarations: [\n    MyApp,\n    HomePage\n  ],\n  imports: [\n    BrowserModule,\n    HttpModule,\n    IonicModule.forRoot(MyApp)\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    HomePage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    Requestvelib,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component } from '@angular/core';\nimport { Platform } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\nimport { HomePage } from '../pages/home/home';\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  rootPage:any = HomePage;\n\n  constructor(platform: Platform, statusBar: StatusBar, splashScreen: SplashScreen) {\n    platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      statusBar.styleDefault();\n      splashScreen.hide();\n    });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts"],"sourceRoot":""}